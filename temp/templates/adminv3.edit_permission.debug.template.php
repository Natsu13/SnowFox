<div  class="row"><div  class="col-xl-9 col-lg-12"><div  class="card"><form  id="useredit"  method="post"  action="<?php echo Router::url(); ?>adminv3/users/update_permission/<?php echo $model['id']; ?>"> <?php if($model["isSystemPermission"]) { ?><div  class="alert alert-warning"><div><?php echo t("This is system permission"); ?></div></div>  <?php } ?><div  class="row"><div  class="col-md-3 static-text"><?php echo t("Name"); ?></div> <div  class="col-md-9"><input  type="text" <?php if((is_bool(  $model['name'] ) && (  $model['name'] )) || !is_bool(  $model['name'] )) { echo " value=\"" . ($model['name']) . "\""; } ?>  name="name" /></div>      </div>   <div  class="row"><div  class="col-md-3 static-text"><?php echo t("Color"); ?></div> <div  class="col-md-9"><span  class="color-picker-input"><span  class="color"  id="color-picker"  style="background-color: <?php echo $model['color']; ?>;"></span> <input  type="text" <?php if((is_bool(  $model['color'] ) && (  $model['color'] )) || !is_bool(  $model['color'] )) { echo " value=\"" . ($model['color']) . "\""; } ?>  name="color" /></span>                         </div>      </div> <div  class="row"><div  class="col-md-3 static-text"><?php echo t("Level"); ?></div>  <?php if($model["isSystemPermission"]) { ?><div  class="col-md-9 static-text"><?php echo $model['level']; ?></div>  <?php } else { ?><div  class="col-md-9"><input  type="text" <?php if((is_bool(  $model['level'] ) && (  $model['level'] )) || !is_bool(  $model['level'] )) { echo " value=\"" . ($model['level']) . "\""; } ?>  name="level" /></div>  <?php } ?></div>  <?php if(!$model["isSystemPermission"]) { ?><div  class="row"><div  class="col-md-3 static-text"></div> <div  class="col-md-9"><label><input  type="toggle_swipe"  name="expired"  value='1' <?php if((is_bool(  $model['isExpired'] ) && (  $model['isExpired'] )) || !is_bool(  $model['isExpired'] )) { echo " checked=\"" . ($model['isExpired']) . "\""; } ?> /> <?php echo t("Expired permission?"); ?></label></div>      </div>   <div  class="row"><div  class="col-md-3 static-text"><?php echo t("Expired time"); ?></div> <div  class="col-md-9"><input  type="text" <?php if((is_bool(  $model['expired_register'] ) && (  $model['expired_register'] )) || !is_bool(  $model['expired_register'] )) { echo " value=\"" . ($model['expired_register']) . "\""; } ?>  name="expired_register" /><div  class="help-text"><?php echo t("Expiration time after registration"); ?>, <?php echo t("for example"); ?><i> +1 month</i></div> </div>      </div>    <?php } ?><div  class="row"><div  class="col-md-3"></div> <div  class="col-md-9"><b><?php echo t("Permissions"); ?></b></div> </div>  <?php foreach($model["permissionList"] as $key => $perm) { ?> <?php $granted = (!isset($model["data"][$perm])? false: $model["data"][$perm] == 1); ?> <?php $disabled = $model["level"] == 10000 && ($perm == "admin" || $perm == "users" || $perm == "system"); ?><div  class="row"><div  class="col-md-3"></div> <div  class="col-md-9"><label><input  type="toggle_swipe" <?php if((is_bool(  $perm ) && (  $perm )) || !is_bool(  $perm )) { echo " name=\"" . ($perm) . "\""; } ?>  value='1' <?php if((is_bool(  $disabled ) && (  $disabled )) || !is_bool(  $disabled )) { echo " disabled=\"" . ($disabled) . "\""; } ?> <?php if((is_bool(  $granted ) && (  $granted )) || !is_bool(  $granted )) { echo " checked=\"" . ($granted) . "\""; } ?>  data-icon-on="check"  data-icon-off="close" /> <?php echo t("Role_".$perm); ?></label></div> </div>  <?php } ?><div  class="row"><div  class="col-md-3"></div> <div  class="col-md-9"><button  type="submit"  class="submit button button-primary"  name="save"><?php echo t('Save'); ?></button>  </div> </div> </form> </div> </div> </div> <script> $(function(){
        $("#color-picker").on("click", function(){
            new ColorPicker().popup($(this), $('[name=color]'));
        });
    });
</script>